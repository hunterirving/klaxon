<!DOCTYPE html>
<html>
<head>
  <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
  <style>
	* {
	  margin: 0;
	  padding: 0;
	  box-sizing: border-box;
	  user-select: none;
	  -webkit-user-select: none;
	  -webkit-tap-highlight-color: transparent;
	}
	
	.player-section {
		height: 50%;
		width: 100%;
		display: flex;
		justify-content: center;
		align-items: center;
		transition: all 0.3s ease;
		/* Add padding to ensure some spacing from edges */
		padding: 20px;
	}

	.timer {
		/* Remove the font-size from body and place it here */
		font-size: min(25vw, 40vh);  /* This will take the smaller of either 25% viewport width or 40% viewport height */
		width: 80%;  /* Take up 80% of the container width */
		text-align: center;
	}

	body {
		height: 100vh;
		width: 100vw;
		overflow: hidden;
		font-family: 'Segment7';
		font-weight: normal;
		font-style: normal;
		/* Remove font-size from here */
	}
	
	#player1 {
	  background: #ff0000;
	  color: black;
	  transform: rotate(180deg);
	}
	
	#player2 {
	  background: #ff0000;
	  color: black;
	}
	
	.inactive {
	  background: black !important;
	  color: #ff0000 !important;
	}

	@font-face {
		font-family: 'Segment7';
		src: url('7segment.ttf') format('truetype');
		font-weight: normal;
		font-style: normal;
	}

	* {
		margin: 0;
		padding: 0;
		box-sizing: border-box;
		user-select: none;
		-webkit-user-select: none;
		-webkit-tap-highlight-color: transparent;
	}

  </style>
</head>
<body>
  <div id="player1" class="player-section">
	<div class="timer">10:00</div>
  </div>
  <div id="player2" class="player-section inactive">
	<div class="timer">10:00</div>
  </div>

  <script>
	const player1 = document.getElementById('player1');
	const player2 = document.getElementById('player2');
	const timers = document.querySelectorAll('.timer');
	
	let timePlayer1 = 600; // 10 minutes in seconds
	let timePlayer2 = 600;
	let activePlayer = 1;
	let interval;
	let gameStarted = false;
	
	function formatTime(seconds) {
	  const mins = Math.floor(seconds / 60);
	  const secs = seconds % 60;
	  return `${String(mins).padStart(2, '0')}:${String(secs).padStart(2, '0')}`;
	}
	
	function updateDisplay() {
	  timers[0].textContent = formatTime(timePlayer1);
	  timers[1].textContent = formatTime(timePlayer2);
	}
	
	function playTimeoutSound() {
	  const audioContext = new (window.AudioContext || window.webkitAudioContext)();
	  const oscillator = audioContext.createOscillator();
	  const gainNode = audioContext.createGain();
	  
	  oscillator.connect(gainNode);
	  gainNode.connect(audioContext.destination);
	  
	  oscillator.type = 'square';
	  oscillator.frequency.setValueAtTime(440, audioContext.currentTime);
	  gainNode.gain.setValueAtTime(1, audioContext.currentTime);
	  
	  oscillator.start();
	  gainNode.gain.exponentialRampToValueAtTime(0.001, audioContext.currentTime + 1);
	  
	  setTimeout(() => {
		oscillator.stop();
	  }, 1000);
	}
	
	function switchPlayer() {
	  activePlayer = activePlayer === 1 ? 2 : 1;
	  player1.classList.toggle('inactive');
	  player2.classList.toggle('inactive');
	}
	
	function tick() {
	  if (activePlayer === 1) {
		timePlayer1--;
		if (timePlayer1 === 0) {
		  clearInterval(interval);
		  playTimeoutSound();
		}
	  } else {
		timePlayer2--;
		if (timePlayer2 === 0) {
		  clearInterval(interval);
		  playTimeoutSound();
		}
	  }
	  updateDisplay();
	}
	
	function startGame() {
	  if (!gameStarted) {
		gameStarted = true;
		interval = setInterval(tick, 1000);
		player2.classList.add('inactive');
	  } else {
		switchPlayer();
	  }
	}
	
	player1.addEventListener('click', startGame);
	player2.addEventListener('click', startGame);
	
	// Prevent scrolling/bouncing on iOS
	document.addEventListener('touchmove', (e) => e.preventDefault(), { passive: false });
  </script>
</body>
</html>